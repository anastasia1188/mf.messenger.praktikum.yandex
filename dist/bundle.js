/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./sass/main.sass":
/*!************************!*
  !*** ./sass/main.sass ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./sass/main.sass?");

/***/ }),

/***/ "./index.ts":
/*!******************!*
  !*** ./index.ts ***!
  \******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _sass_main_sass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sass/main.sass */ \"./sass/main.sass\");\n/* harmony import */ var _src_pages_login_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/pages/login/index */ \"./src/pages/login/index.ts\");\n/* harmony import */ var _src_pages_registration_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/pages/registration/index */ \"./src/pages/registration/index.ts\");\n/* harmony import */ var _src_pages_chat_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/chat/index */ \"./src/pages/chat/index.ts\");\n/* harmony import */ var _src_pages_settings_index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/pages/settings/index */ \"./src/pages/settings/index.ts\");\n/* harmony import */ var _src_modules_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/modules/router */ \"./src/modules/router.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\nlet mainRouter = new _src_modules_router__WEBPACK_IMPORTED_MODULE_5__.default(\".app\");\r\nfunction changeRoute() {\r\n    console.log(window.location.hash);\r\n    mainRouter.go(\"/\" + window.location.hash);\r\n}\r\nmainRouter\r\n    .use(\"/#login\", _src_pages_login_index__WEBPACK_IMPORTED_MODULE_1__.Login)\r\n    .use(\"/#registration\", _src_pages_registration_index__WEBPACK_IMPORTED_MODULE_2__.Registration)\r\n    .use(\"/#settings\", _src_pages_settings_index__WEBPACK_IMPORTED_MODULE_4__.Settings)\r\n    .use(\"/#chat\", _src_pages_chat_index__WEBPACK_IMPORTED_MODULE_3__.Chat)\r\n    .use(\"/404\", _src_pages_chat_index__WEBPACK_IMPORTED_MODULE_3__.Chat)\r\n    .start();\r\nsetTimeout(() => {\r\n    mainRouter.go(\"/#login\");\r\n}, 1000);\r\nwindow.addEventListener(\"hashchange\", changeRoute);\r\nwindow.Chat = _src_pages_chat_index__WEBPACK_IMPORTED_MODULE_3__.Chat;\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./index.ts?");

/***/ }),

/***/ "./src/components/myButton/index.ts":
/*!******************************************!*
  !*** ./src/components/myButton/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ myButton\n/* harmony export */ });\n/* harmony import */ var _modules_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/block */ \"./src/modules/block.ts\");\n/* harmony import */ var _myButton_tmpl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./myButton.tmpl */ \"./src/components/myButton/myButton.tmpl.ts\");\n\r\n\r\nclass myButton extends _modules_block__WEBPACK_IMPORTED_MODULE_0__.default {\r\n    constructor(props) {\r\n        super('button', props);\r\n    }\r\n    render(mainElem) {\r\n        return compileTemplate('.myButton', (0,_myButton_tmpl__WEBPACK_IMPORTED_MODULE_1__.default)(), this.props, mainElem);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/components/myButton/index.ts?");

/***/ }),

/***/ "./src/components/myButton/myButton.tmpl.ts":
/*!**************************************************!*
  !*** ./src/components/myButton/myButton.tmpl.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ getTemplateMyButton\n/* harmony export */ });\nfunction getTemplateMyButton() {\r\n    return `<p>\n        <button id={{id}} type=\"submit\" class={{className}}> {{mesButton}} \n        </button>\n    </p>`;\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/components/myButton/myButton.tmpl.ts?");

/***/ }),

/***/ "./src/modules/autorization.ts":
/*!*************************************!*
  !*** ./src/modules/autorization.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"isAutorizied\": () => /* binding */ isAutorizied,\n/* harmony export */   \"isRegistrationSuccess\": () => /* binding */ isRegistrationSuccess,\n/* harmony export */   \"saveUserData\": () => /* binding */ saveUserData,\n/* harmony export */   \"saveAvatar\": () => /* binding */ saveAvatar,\n/* harmony export */   \"getUserData\": () => /* binding */ getUserData,\n/* harmony export */   \"getChats\": () => /* binding */ getChats,\n/* harmony export */   \"getMessages\": () => /* binding */ getMessages,\n/* harmony export */   \"addChatToList\": () => /* binding */ addChatToList,\n/* harmony export */   \"deleteChatFromList\": () => /* binding */ deleteChatFromList,\n/* harmony export */   \"addUsertoChat\": () => /* binding */ addUsertoChat,\n/* harmony export */   \"deleteUserFromChat\": () => /* binding */ deleteUserFromChat,\n/* harmony export */   \"logout\": () => /* binding */ logout\n/* harmony export */ });\nconst host = 'https://ya-praktikum.tech/api/v2';\r\nasync function isAutorizied(user) {\r\n    try {\r\n        const response = await fetch(`${host}/auth/signin`, {\r\n            method: 'POST',\r\n            credentials: 'include',\r\n            mode: 'cors',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8',\r\n            },\r\n            body: JSON.stringify(user),\r\n        });\r\n        console.log('user', user);\r\n        if (response.status === 200) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    catch (err) {\r\n        return false;\r\n    }\r\n}\r\nfunction isRegistrationSuccess(user) {\r\n    return fetch(`${host}/auth/signup`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        mode: 'cors',\r\n        headers: {\r\n            'content-type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n            first_name: user.name,\r\n            second_name: user.name,\r\n            login: user.login,\r\n            email: user.email,\r\n            phone: '+79194234578',\r\n            password: user.password,\r\n        }),\r\n    })\r\n        .then((response) => response.text()) // Можно вытащить через .json()\r\n        .then((data) => {\r\n        console.log(data);\r\n        return data;\r\n    });\r\n}\r\nfunction saveUserData(user) {\r\n    return fetch(`${host}/user/profile`, {\r\n        method: 'PUT',\r\n        credentials: 'include',\r\n        mode: 'cors',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8',\r\n        },\r\n        body: JSON.stringify(user),\r\n    }).then((response) => response.text()) // Можно вытащить через .json()\r\n        .then((data) => {\r\n        console.log(data);\r\n        return data;\r\n    });\r\n}\r\nfunction saveAvatar(avatar) {\r\n    console.log(avatar);\r\n    return fetch(`${host}/user/profile/avatar`, {\r\n        method: 'PUT',\r\n        credentials: 'include',\r\n        mode: 'cors',\r\n        body: avatar,\r\n    }).then((response) => response.text()) // Можно вытащить через .json()\r\n        .then((data) => {\r\n        console.log(data);\r\n        return data;\r\n    });\r\n}\r\nasync function getUserData() {\r\n    const response = await fetch(`${host}/auth/user`, {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n        mode: 'cors',\r\n    });\r\n    const result = response.json();\r\n    console.log('result', result);\r\n    return result;\r\n}\r\nasync function getChats() {\r\n    const response = await fetch(`${host}/chats`, {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n        mode: 'cors',\r\n    });\r\n    const result = response.json();\r\n    console.log('result', result);\r\n    return result;\r\n}\r\nasync function getMessages() {\r\n    const response = await fetch('/messages');\r\n    const result = response.json();\r\n    return result;\r\n}\r\nasync function addChatToList(chat) {\r\n    try {\r\n        const response = await fetch(`${host}/chats`, {\r\n            method: 'POST',\r\n            credentials: 'include',\r\n            mode: 'cors',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8',\r\n            },\r\n            body: JSON.stringify(chat),\r\n        });\r\n        if (response.status === 200) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    catch (err) {\r\n        return false;\r\n    }\r\n}\r\nasync function deleteChatFromList(chat) {\r\n    console.log('chat', chat);\r\n    try {\r\n        const response = await fetch('/chats', {\r\n            method: 'DELETE',\r\n            credentials: 'include',\r\n            mode: 'cors',\r\n            headers: {\r\n                accept: 'application/json',\r\n                'Content-Type': 'application/json;charset=utf-8',\r\n            },\r\n            body: JSON.stringify(chat),\r\n        });\r\n        console.log('response', response.json());\r\n        if (response.status === 200) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    catch (err) {\r\n        return false;\r\n    }\r\n}\r\n// TODO\r\nfunction addUsertoChat(user) {\r\n    return fetch(`${host}/chat/users`, {\r\n        method: 'PUT',\r\n        credentials: 'include',\r\n        mode: 'cors',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8',\r\n        },\r\n        body: JSON.stringify(user),\r\n    }).then((response) => response.text())\r\n        .then((data) => {\r\n        console.log(data);\r\n        return data;\r\n    });\r\n}\r\nfunction deleteUserFromChat(user) {\r\n    console.log(user);\r\n    return fetch(`${host}/chats/users`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n        mode: 'cors',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8',\r\n        },\r\n        body: JSON.stringify(user),\r\n    }).then((response) => response.text())\r\n        .then((data) => {\r\n        console.log(data);\r\n        return data;\r\n    });\r\n}\r\nfunction logout() {\r\n    return fetch(`${host}/auth/logout`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        mode: 'cors',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8',\r\n        },\r\n    }).then((response) => response.text())\r\n        .then((data) => {\r\n        console.log(data);\r\n        return data;\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/modules/autorization.ts?");

/***/ }),

/***/ "./src/modules/block.ts":
/*!******************************!*
  !*** ./src/modules/block.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ Block\n/* harmony export */ });\n/* harmony import */ var _eventBus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./eventBus */ \"./src/modules/eventBus.ts\");\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _element, _meta;\r\n/// <reference path=\"references.d.ts\" />\r\n\r\nclass Block {\r\n    constructor(tagName = 'div', props = {}) {\r\n        _element.set(this, null);\r\n        _meta.set(this, null);\r\n        this.setProps = (nextProps) => {\r\n            if (!nextProps) {\r\n                return;\r\n            }\r\n            Object.assign(this.props, nextProps);\r\n        };\r\n        const eventBus = new _eventBus__WEBPACK_IMPORTED_MODULE_0__.EventBus();\r\n        __classPrivateFieldSet(this, _meta, {\r\n            tagName,\r\n            props,\r\n        });\r\n        this.props = this.makePropsProxy(props);\r\n        this.eventBus = () => eventBus;\r\n        this.registerEvents(eventBus);\r\n        eventBus.emit(Block.EVENTS.INIT);\r\n    }\r\n    registerEvents(eventBus) {\r\n        eventBus.on(Block.EVENTS.INIT, this.init.bind(this));\r\n        eventBus.on(Block.EVENTS.FLOW_CDM, this.componentDidMountLocal.bind(this));\r\n        eventBus.on(Block.EVENTS.FLOW_CDU, this.componentDidUpdateLocal.bind(this));\r\n        eventBus.on(Block.EVENTS.FLOW_RENDER, this.render.bind(this));\r\n    }\r\n    createResources() {\r\n        const { tagName } = __classPrivateFieldGet(this, _meta);\r\n        __classPrivateFieldSet(this, _element, this.createDocumentElement(tagName));\r\n    }\r\n    init() {\r\n        this.createResources();\r\n        this.eventBus().emit(Block.EVENTS.FLOW_CDM);\r\n    }\r\n    componentDidMountLocal() {\r\n        this.eventBus().emit(Block.EVENTS.FLOW_RENDER);\r\n    }\r\n    componentDidUpdateLocal(oldProps, newProps) {\r\n        const response = this.componentDidUpdate(oldProps, newProps);\r\n        if (!response) {\r\n            return;\r\n        }\r\n        this.render();\r\n    }\r\n    componentDidUpdate(oldProps, newProps) {\r\n        return deepEqual(oldProps, newProps);\r\n    }\r\n    get element() {\r\n        return __classPrivateFieldGet(this, _element);\r\n    }\r\n    render(mainElem) {\r\n        const block = this.render();\r\n        __classPrivateFieldGet(this, _element).innerHTML = block;\r\n    }\r\n    getContent() {\r\n        return this.element;\r\n    }\r\n    makePropsProxy(props) {\r\n        const self = this;\r\n        return new Proxy(props, {\r\n            get(target, prop) {\r\n                const value = target[prop];\r\n                return typeof value === 'function' ? value.bind(target) : value;\r\n            },\r\n            set(target, prop, value) {\r\n                target[prop] = value;\r\n                self.eventBus().emit(Block.EVENTS.FLOW_CDU, { ...target }, target);\r\n                return true;\r\n            },\r\n            deleteProperty() {\r\n                throw new Error('Нет доступа');\r\n            },\r\n        });\r\n    }\r\n    createDocumentElement(tagName) {\r\n        return document.createElement(tagName);\r\n    }\r\n    show() {\r\n        this.getContent().style.display = 'block';\r\n    }\r\n    hide() {\r\n        this.getContent().style.display = 'none';\r\n    }\r\n}\r\n_element = new WeakMap(), _meta = new WeakMap();\r\nBlock.EVENTS = {\r\n    INIT: 'init',\r\n    FLOW_CDM: 'flow:component-did-mount',\r\n    FLOW_CDU: 'flow:component-did-update',\r\n    FLOW_RENDER: 'flow:render',\r\n};\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/modules/block.ts?");

/***/ }),

/***/ "./src/modules/eventBus.ts":
/*!*********************************!*
  !*** ./src/modules/eventBus.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EventBus\": () => /* binding */ EventBus\n/* harmony export */ });\nclass EventBus {\r\n    constructor() {\r\n        this.listeners = {};\r\n    }\r\n    on(event, callback) {\r\n        if (!this.listeners[event]) {\r\n            this.listeners[event] = [];\r\n        }\r\n        this.listeners[event].push(callback);\r\n    }\r\n    off(event, callback) {\r\n        if (!this.listeners[event]) {\r\n            throw new Error(`Нет события: ${event}`);\r\n        }\r\n        this.listeners[event] = this.listeners[event].filter((listener) => listener !== callback);\r\n    }\r\n    emit(event, ...args) {\r\n        if (!this.listeners[event]) {\r\n            throw new Error(`Нет события: ${event}`);\r\n        }\r\n        this.listeners[event].forEach((listener) => {\r\n            listener(...args);\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/modules/eventBus.ts?");

/***/ }),

/***/ "./src/modules/regExps.ts":
/*!********************************!*
  !*** ./src/modules/regExps.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"REXP_EMAIL\": () => /* binding */ REXP_EMAIL,\n/* harmony export */   \"REXP_LOGIN\": () => /* binding */ REXP_LOGIN,\n/* harmony export */   \"REXP_LITERAL\": () => /* binding */ REXP_LITERAL,\n/* harmony export */   \"REXP_NUMERAL\": () => /* binding */ REXP_NUMERAL,\n/* harmony export */   \"REXP_GAP\": () => /* binding */ REXP_GAP\n/* harmony export */ });\nconst REXP_EMAIL = new RegExp('^([a-z0-9_-]+\\.)*[a-z0-9_-]+@[a-z0-9_-]+(\\.[a-z0-9_-]+)*\\.[a-z]{2,6}$');\r\nconst REXP_LOGIN = new RegExp('^([a-z0-9_-]+\\.)*[a-z0-9_-]$');\r\nconst REXP_LITERAL = /[a-z]/i;\r\nconst REXP_NUMERAL = /[0-9]/;\r\nconst REXP_GAP = /\\s/g;\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/modules/regExps.ts?");

/***/ }),

/***/ "./src/modules/router.ts":
/*!*******************************!*
  !*** ./src/modules/router.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Route\": () => /* binding */ Route,\n/* harmony export */   \"default\": () => /* binding */ Router\n/* harmony export */ });\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _pathName, _blockClass, _block, _props, _currentRoute, _rootQuery, _currentBlock;\r\nfunction isEqual(lhs, rhs) {\r\n    return lhs === rhs;\r\n}\r\nasync function render(query, block) {\r\n    const root = document.querySelector(query);\r\n    root.innerHTML = await block.render();\r\n    block.setEvents();\r\n    return root;\r\n}\r\nclass Route {\r\n    constructor(pathName, view, props) {\r\n        _pathName.set(this, void 0);\r\n        _blockClass.set(this, void 0);\r\n        _block.set(this, void 0);\r\n        _props.set(this, void 0);\r\n        __classPrivateFieldSet(this, _pathName, pathName);\r\n        __classPrivateFieldSet(this, _blockClass, view);\r\n        __classPrivateFieldSet(this, _block, null);\r\n        __classPrivateFieldSet(this, _props, props);\r\n    }\r\n    navigate(pathName) {\r\n        if (this.match(pathName)) {\r\n            __classPrivateFieldSet(this, _pathName, pathName);\r\n            this.render();\r\n        }\r\n    }\r\n    leave() {\r\n        if (__classPrivateFieldGet(this, _block)) {\r\n            __classPrivateFieldGet(this, _block).hide();\r\n        }\r\n    }\r\n    match(pathName) {\r\n        return isEqual(pathName, __classPrivateFieldGet(this, _pathName));\r\n    }\r\n    render() {\r\n        if (!__classPrivateFieldGet(this, _block)) {\r\n            __classPrivateFieldSet(this, _block, new (__classPrivateFieldGet(this, _blockClass))());\r\n            render(__classPrivateFieldGet(this, _props).rootQuery, __classPrivateFieldGet(this, _block));\r\n            __classPrivateFieldGet(this, _block).show();\r\n            window.currentBlock = __classPrivateFieldGet(this, _block);\r\n            return;\r\n        }\r\n        window.currentBlock = __classPrivateFieldGet(this, _block);\r\n        render(__classPrivateFieldGet(this, _props).rootQuery, __classPrivateFieldGet(this, _block));\r\n    }\r\n}\r\n_pathName = new WeakMap(), _blockClass = new WeakMap(), _block = new WeakMap(), _props = new WeakMap();\r\nclass Router {\r\n    constructor(rootQuery) {\r\n        _currentRoute.set(this, void 0);\r\n        _rootQuery.set(this, void 0);\r\n        _currentBlock.set(this, void 0);\r\n        if (Router.__instance) {\r\n            return Router.__instance;\r\n        }\r\n        this.routes = [];\r\n        this.history = window.history;\r\n        __classPrivateFieldSet(this, _currentRoute, null);\r\n        __classPrivateFieldSet(this, _rootQuery, rootQuery);\r\n        __classPrivateFieldSet(this, _currentBlock, null);\r\n        Router.__instance = this;\r\n    }\r\n    use(pathName, block) {\r\n        const route = new Route(pathName, block, { rootQuery: __classPrivateFieldGet(this, _rootQuery) });\r\n        this.routes.push(route);\r\n        return this;\r\n    }\r\n    start() {\r\n        window.onpopstate = ((event) => {\r\n            this.onRoute(event.currentTarget.location.pathname);\r\n        });\r\n        this.onRoute(window.location.pathname);\r\n    }\r\n    onRoute(pathName) {\r\n        const route = this.getRoute(pathName);\r\n        if (!route) {\r\n            return;\r\n        }\r\n        if (__classPrivateFieldGet(this, _currentRoute)) {\r\n            __classPrivateFieldGet(this, _currentRoute).leave();\r\n        }\r\n        route.render(route, pathName);\r\n        __classPrivateFieldSet(this, _currentRoute, route);\r\n    }\r\n    go(pathName) {\r\n        this.history.pushState({}, '', pathName);\r\n        this.onRoute(pathName);\r\n    }\r\n    back() {\r\n        this.history.back();\r\n    }\r\n    forward() {\r\n        this.history.forward();\r\n    }\r\n    getRoute(pathName) {\r\n        return this.routes.find((route) => route.match(pathName));\r\n    }\r\n}\r\n_currentRoute = new WeakMap(), _rootQuery = new WeakMap(), _currentBlock = new WeakMap();\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/modules/router.ts?");

/***/ }),

/***/ "./src/modules/validation.ts":
/*!***********************************!*
  !*** ./src/modules/validation.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"isValidEmail\": () => /* binding */ isValidEmail,\n/* harmony export */   \"isValidLogin\": () => /* binding */ isValidLogin,\n/* harmony export */   \"isValidName\": () => /* binding */ isValidName,\n/* harmony export */   \"isValidPassword\": () => /* binding */ isValidPassword,\n/* harmony export */   \"isValidMessage\": () => /* binding */ isValidMessage,\n/* harmony export */   \"validateEMail\": () => /* binding */ validateEMail,\n/* harmony export */   \"validateLogin\": () => /* binding */ validateLogin,\n/* harmony export */   \"validateName\": () => /* binding */ validateName,\n/* harmony export */   \"validatePassword\": () => /* binding */ validatePassword,\n/* harmony export */   \"validateMessage\": () => /* binding */ validateMessage,\n/* harmony export */   \"setValidate\": () => /* binding */ setValidate,\n/* harmony export */   \"setFocus\": () => /* binding */ setFocus,\n/* harmony export */   \"elemFocus\": () => /* binding */ elemFocus,\n/* harmony export */   \"isValidValues\": () => /* binding */ isValidValues\n/* harmony export */ });\n/* harmony import */ var _regExps__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regExps */ \"./src/modules/regExps.ts\");\n\r\nvar typeErrors;\r\n(function (typeErrors) {\r\n    typeErrors[typeErrors[\"FORMAT_ERROR\"] = 0] = \"FORMAT_ERROR\";\r\n    typeErrors[typeErrors[\"LENGTH_PWD_ERROR\"] = 1] = \"LENGTH_PWD_ERROR\";\r\n    typeErrors[typeErrors[\"LITERAL_ERROR\"] = 2] = \"LITERAL_ERROR\";\r\n    typeErrors[typeErrors[\"NUMERAL_ERROR\"] = 3] = \"NUMERAL_ERROR\";\r\n    typeErrors[typeErrors[\"GAP_ERROR\"] = 4] = \"GAP_ERROR\";\r\n    typeErrors[typeErrors[\"LENGTH_ERROR\"] = 5] = \"LENGTH_ERROR\";\r\n    typeErrors[typeErrors[\"PWDR_ERROR\"] = 6] = \"PWDR_ERROR\";\r\n    typeErrors[typeErrors[\"INEDITOR_ERROR\"] = 7] = \"INEDITOR_ERROR\";\r\n})(typeErrors || (typeErrors = {}));\r\nfunction getValueElement(idElement) {\r\n    let result;\r\n    const element = document.getElementById(idElement);\r\n    if (element !== null) {\r\n        result = element.value;\r\n    }\r\n    return result;\r\n}\r\nfunction isValidEmail(email) {\r\n    const result = {\r\n        isValid: true,\r\n        errors: [],\r\n    };\r\n    const errors = [];\r\n    if (email.length < 5) {\r\n        errors.push(typeErrors.LENGTH_ERROR);\r\n    }\r\n    if (!_regExps__WEBPACK_IMPORTED_MODULE_0__.REXP_EMAIL.test(email)) {\r\n        errors.push(typeErrors.FORMAT_ERROR);\r\n    }\r\n    if (email.search(_regExps__WEBPACK_IMPORTED_MODULE_0__.REXP_GAP) >= 0) {\r\n        errors.push(typeErrors.GAP_ERROR);\r\n    }\r\n    if (errors.length > 0) {\r\n        result.isValid = false;\r\n    }\r\n    result.errors = errors;\r\n    return result;\r\n}\r\nfunction isValidLogin(login) {\r\n    const result = {\r\n        isValid: true,\r\n        errors: [],\r\n    };\r\n    const errors = [];\r\n    if (login.length < 5) {\r\n        errors.push(typeErrors.LENGTH_ERROR);\r\n    }\r\n    if (!_regExps__WEBPACK_IMPORTED_MODULE_0__.REXP_LOGIN.test(login)) {\r\n        errors.push(typeErrors.FORMAT_ERROR);\r\n    }\r\n    if (login.search(_regExps__WEBPACK_IMPORTED_MODULE_0__.REXP_GAP) >= 0) {\r\n        errors.push(typeErrors.GAP_ERROR);\r\n    }\r\n    if (errors.length > 0) {\r\n        result.isValid = false;\r\n    }\r\n    result.errors = errors;\r\n    return result;\r\n}\r\nfunction isValidName(login) {\r\n    const result = {\r\n        isValid: true,\r\n        errors: [],\r\n    };\r\n    const errors = [];\r\n    if (login.length < 5) {\r\n        errors.push(typeErrors.LENGTH_ERROR);\r\n    }\r\n    if (login.search(_regExps__WEBPACK_IMPORTED_MODULE_0__.REXP_GAP) >= 0) {\r\n        errors.push(typeErrors.GAP_ERROR);\r\n    }\r\n    if (errors.length > 0) {\r\n        result.isValid = false;\r\n    }\r\n    result.errors = errors;\r\n    return result;\r\n}\r\nfunction isValidPassword(password) {\r\n    const result = {\r\n        isValid: true,\r\n        errors: [],\r\n    };\r\n    const errors = [];\r\n    if (password.length < 8) {\r\n        errors.push(typeErrors.LENGTH_PWD_ERROR);\r\n    }\r\n    if (password.search(_regExps__WEBPACK_IMPORTED_MODULE_0__.REXP_LITERAL) < 0) {\r\n        errors.push(typeErrors.LITERAL_ERROR);\r\n    }\r\n    if (password.search(_regExps__WEBPACK_IMPORTED_MODULE_0__.REXP_NUMERAL) < 0) {\r\n        errors.push(typeErrors.NUMERAL_ERROR);\r\n    }\r\n    if (password.search(_regExps__WEBPACK_IMPORTED_MODULE_0__.REXP_GAP) >= 0) {\r\n        errors.push(typeErrors.GAP_ERROR);\r\n    }\r\n    if (errors.length > 0) {\r\n        result.isValid = false;\r\n    }\r\n    const passwordRepeat = getValueElement('passwordr');\r\n    if ((passwordRepeat !== undefined) && (!(password === passwordRepeat))) {\r\n        errors.push(typeErrors.PWDR_ERROR);\r\n    }\r\n    result.errors = errors;\r\n    return result;\r\n}\r\nfunction isValidMessage(message) {\r\n    const result = {\r\n        isValid: true,\r\n        errors: [],\r\n    };\r\n    const errors = [];\r\n    if (message.length < 1) {\r\n        errors.push(typeErrors.INEDITOR_ERROR);\r\n    }\r\n    if (errors.length > 0) {\r\n        result.isValid = false;\r\n    }\r\n    result.errors = errors;\r\n    return result;\r\n}\r\nfunction validateEMail(idElement, nameHiddenError) {\r\n    const value = getValueElement(idElement);\r\n    const resultValidate = isValidEmail(value);\r\n    showErrors(resultValidate, idElement, nameHiddenError);\r\n}\r\nfunction validateLogin(idElement, nameHiddenError) {\r\n    const value = getValueElement(idElement);\r\n    const resultValidate = isValidLogin(value);\r\n    showErrors(resultValidate, idElement, nameHiddenError);\r\n}\r\nfunction validateName(idElement, nameHiddenError) {\r\n    const value = getValueElement(idElement);\r\n    const resultValidate = isValidName(value);\r\n    showErrors(resultValidate, idElement, nameHiddenError);\r\n}\r\nfunction validatePassword(idElement, nameHiddenError) {\r\n    const value = getValueElement(idElement);\r\n    const resultValidate = isValidPassword(value);\r\n    showErrors(resultValidate, idElement, nameHiddenError);\r\n}\r\nfunction validateMessage(idElement, nameHiddenError) {\r\n    const value = getValueElement(idElement);\r\n    const resultValidate = isValidMessage(value);\r\n    showErrors(resultValidate, idElement, nameHiddenError);\r\n}\r\nfunction showErrors(resultValidate, idElement, nameHiddenError) {\r\n    let nameError = `err-${idElement}`;\r\n    if (resultValidate.errors.length > 0)\r\n        nameError += String(resultValidate.errors[0]);\r\n    const elementError = document.getElementById(nameError);\r\n    if (!resultValidate.isValid) {\r\n        showHiddenElement(elementError, nameHiddenError);\r\n        return false;\r\n    }\r\n    hideHiddenElement(elementError, nameHiddenError);\r\n    return true;\r\n}\r\nfunction showHiddenElement(elementError, nameHiddenError) {\r\n    if (elementError === void 0) {\r\n        elementError = null;\r\n    }\r\n    if (nameHiddenError === void 0) {\r\n        nameHiddenError = '';\r\n    }\r\n    if (elementError != null) {\r\n        elementError.classList.remove(nameHiddenError);\r\n    }\r\n}\r\nfunction hideHiddenElement(elementError, nameHiddenError) {\r\n    if (elementError === void 0) {\r\n        elementError = null;\r\n    }\r\n    if (nameHiddenError === void 0) {\r\n        nameHiddenError = '';\r\n    }\r\n    if (elementError != null && (!elementError.classList.contains(nameHiddenError))) {\r\n        elementError.classList.add(nameHiddenError);\r\n    }\r\n}\r\nfunction setValidate(idInput, funcValidate, nameHiddenError) {\r\n    const finput = document.getElementById(idInput);\r\n    finput.addEventListener('blur', (e) => {\r\n        funcValidate(idInput, nameHiddenError);\r\n    });\r\n}\r\nfunction setFocus(arrInputs, nameHiddenError) {\r\n    for (let i = 0; i < arrInputs.length; i++) {\r\n        const id = arrInputs[i].input;\r\n        const finput = document.getElementById(id);\r\n        finput.addEventListener('focus', (e) => {\r\n            elemFocus(id, nameHiddenError);\r\n        });\r\n    }\r\n}\r\nfunction elemFocus(id, nameHiddenError) {\r\n    const arrMesPwd = [0, 1, 2, 3, 4, 5, 6, 7];\r\n    const nameError = `err-${id}`;\r\n    const arrFields = [];\r\n    for (let i = 0; i < arrMesPwd.length; i++) {\r\n        arrFields.push(`${nameError}${arrMesPwd[i]}`);\r\n    }\r\n    for (let i = 0; i < arrFields.length; i++) {\r\n        const elementError = document.getElementById(arrFields[i]);\r\n        if ((elementError != null) && (!elementError.classList.contains(nameHiddenError))) {\r\n            elementError.classList.add(nameHiddenError);\r\n        }\r\n    }\r\n}\r\nfunction isValidValues(arrInputs, nameHiddenError) {\r\n    for (let i = 0; i < arrInputs.length; i++) {\r\n        const funcValidate = arrInputs[i].value;\r\n        const idElement = arrInputs[i].input;\r\n        const value = getValueElement(idElement);\r\n        const result = funcValidate(value);\r\n        if (!result.isValid) {\r\n            showErrors(result, idElement, nameHiddenError);\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/modules/validation.ts?");

/***/ }),

/***/ "./src/pages/chat/chat.tmpl.ts":
/*!*************************************!*
  !*** ./src/pages/chat/chat.tmpl.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ getTemplateChat\n/* harmony export */ });\nfunction getTemplateChat() {\r\n    return `<div class=\"chat-wrapper\">\n    <div class=\"chat-wrapper__left-part\">\n        <div class=\"chat-wrapper__search\">\n            <div class=\"chat-wrapper__logo\">\n                <img id=\"avatar\" src=\"{{fileImage}}\" alt=\"\" class=\"round\" width=\"60px\" height=\"60px\">\n                <div><a href=\"/#settings\" onclick = \"window.location.hash = '#settings'\" height=\"10px\"> {{name}} </a></div>\n            </div>\n            <div><a href=\"/#login\" onclick = \"Chat.exit()\"> Выход </a></div>\n            <img id=\"sound\" src=\"{{fileImageSound}}\" alt=\"\" class=\"round\" width=\"15px\" height=\"15px\">\n            <img id=\"add\" src=\"{{fileAdd}}\" alt=\"\" class=\"round\" width=\"15px\" height=\"15px\">\n            <img id=\"delete\" src=\"{{fileDelete}}\" alt=\"\" class=\"round\" width=\"15px\" height=\"15px\">\n            <div> <input id=\"search\" class=\"chat-wrapper__search-field\" type=\"search\" placeholder=\"Поиск\">\n            </div>\n        </div>\n        <div class=\"chat-wrapper__contacts\">\n            {{#each pianoKeys}}\n            <div class=\"chat-wrapper__white-pianokey {{this.pressed}}\">\n                <div class=\"chat-wrapper__row-contact\">\n                    <div class=\"chat-wrapper__contact\"> {{this.contact}} </div>\n                    <div class=\"chat-wrapper__count-mes\"> {{this.countmes}} </div>\n                </div>\n                <div class=\"chat-wrapper__black-pianokey\" {{this.hidden}}></div>\n            </div>\n            {{/each}}\n        </div>\n    </div>\n    <div class=\"chat-wrapper__chat\">\n        <div class=\"chat-wrapper__messages\">\n            {{#each messages}}\n            <div class=\"chat-wrapper__date-mes\"> {{this.date}}</div>\n            {{#each this.message}}\n            <div class={{classmes}}> {{this.text}}\n                <div class=\"chat-wrapper__time-mes\"> {{this.time}} </div>\n            </div>\n            {{/each}} {{/each}}           \n        </div>\n        <input id=\"ineditor\" class=\"chat-wrapper__in-editor\">\n        <p class=\"chat-wrapper__errmes chat-wrapper__errmes-hiddenerr\" id=\"err-ineditor7\">\n            {{errmes}}\n        </p>\n    </div>\n</div>\n\n\n</div>`;\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/pages/chat/chat.tmpl.ts?");

/***/ }),

/***/ "./src/pages/chat/index.ts":
/*!*********************************!*
  !*** ./src/pages/chat/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Chat\": () => /* binding */ Chat\n/* harmony export */ });\n/* harmony import */ var _modules_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/block */ \"./src/modules/block.ts\");\n/* harmony import */ var _chat_tmpl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat.tmpl */ \"./src/pages/chat/chat.tmpl.ts\");\n/* harmony import */ var _modules_validation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../modules/validation */ \"./src/modules/validation.ts\");\n/* harmony import */ var _modules_autorization__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../modules/autorization */ \"./src/modules/autorization.ts\");\n/// <reference path=\"../../../src/modules/references.d.ts\" />\r\n\r\n\r\n\r\n\r\nconst socket = new WebSocket('ws://localhost:3000/');\r\nlet curLogin;\r\nclass Chat extends _modules_block__WEBPACK_IMPORTED_MODULE_0__.default {\r\n    constructor(props) {\r\n        super('chat', props);\r\n        this.fileImage = '';\r\n        this.name = '';\r\n        this.errorMessage = '';\r\n        this.getFileData();\r\n        const data = {\r\n            messages: this.messages,\r\n            chat: this,\r\n        };\r\n        this.proxyData = new Proxy(data, {\r\n            get(target, prop) {\r\n                const value = target[prop];\r\n                return typeof value === 'function' ? value.bind(target) : value;\r\n            },\r\n            set(target, prop, value) {\r\n                target[prop] = value;\r\n                target.chat.render();\r\n                // target.chat.setEvents();\r\n                return true;\r\n            },\r\n        });\r\n    }\r\n    async getFileData() {\r\n        const userData = await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_3__.getUserData)();\r\n        window.login = userData.login;\r\n        curLogin = userData.login;\r\n        // console.log(\"log\", userData.login);\r\n        this.name = userData.first_name;\r\n        const messages = await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_3__.getMessages)();\r\n        const newMes = this.prepareMessages(JSON.parse(messages));\r\n        this.messages = newMes;\r\n        const chats = await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_3__.getChats)();\r\n        const preparedChats = this.prepareChats(chats);\r\n        this.contacts = preparedChats;\r\n        // console.log('contacts', preparedChats);\r\n        // console.log('avatar', userData.avatar);\r\n        if (userData.avatar === null)\r\n            this.fileImage = '../../../data/img/noava.png';\r\n        else\r\n            this.fileImage = `https://ya-praktikum.tech${userData.avatar}`;\r\n    }\r\n    prepareMessages(mes) {\r\n        // console.log('hi');\r\n        const dates = new Set();\r\n        const cont = new Set();\r\n        // console.log((window.login, window);\r\n        for (let i = 0; i < mes.length; i++) {\r\n            // console.log(\"!!!\", this.messages[i], curLogin);\r\n            if ((mes[i].from === curLogin) || (mes[i].to === curLogin)) {\r\n                dates.add(mes[i].date);\r\n                if ((mes[i].from !== curLogin) && (mes[i].from !== undefined))\r\n                    cont.add(mes[i].from.trim());\r\n                if ((mes[i].to !== curLogin) && (mes[i].to !== undefined))\r\n                    cont.add(mes[i].to.trim());\r\n            }\r\n            if (mes[i].from !== undefined)\r\n                mes[i].from = mes[i].from.trim();\r\n            if (mes[i].to !== undefined)\r\n                mes[i].to = mes[i].to.trim();\r\n        }\r\n        // console.log(cont);\r\n        // console.log(dates);\r\n        const result = [];\r\n        for (const valueCont of cont) {\r\n            const decContact = { contact: valueCont, history: [] };\r\n            for (const value of dates) {\r\n                const decDate = { date: value, message: [] };\r\n                const dateMes = [];\r\n                const history = [];\r\n                console.log('mes', mes);\r\n                for (let i = 0; i < mes.length; i++) {\r\n                    // console.log('init', valueCont, value, curLogin);\r\n                    if ((mes[i].from === curLogin.trim()) || (mes[i].to === curLogin.trim())) {\r\n                        console.log('init1');\r\n                        if ((mes[i].from === valueCont) || (mes[i].to === valueCont)) {\r\n                            console.log('init2');\r\n                            if (mes[i].date === value) {\r\n                                console.log('init3');\r\n                                if (mes[i].from.trim() === curLogin.trim())\r\n                                    mes[i].classmes = 'chat-wrapper__message-from';\r\n                                if (mes[i].to.trim() === curLogin.trim())\r\n                                    mes[i].classmes = 'chat-wrapper__message-in';\r\n                                dateMes.push(mes[i]);\r\n                            }\r\n                        }\r\n                        decDate.message = dateMes;\r\n                    }\r\n                }\r\n                history.push(decDate);\r\n                decContact.history = history;\r\n            }\r\n            result.push(decContact);\r\n        }\r\n        console.log('resultmes', result);\r\n        return result;\r\n    }\r\n    prepareChats(chats) {\r\n        // console.log('chats', chats);\r\n        const result = [];\r\n        for (let i = 0; i < chats.length; i++) {\r\n            const contact = {\r\n                id: 0,\r\n                contact: '',\r\n                countmes: '',\r\n                hidden: 'false',\r\n                pressed: false,\r\n                pianokey: '',\r\n                users: [],\r\n            };\r\n            contact.id = chats[i].id;\r\n            contact.contact = chats[i].title;\r\n            let ind = i;\r\n            if (i > 7)\r\n                ind = i % 7;\r\n            // console.log('ind', ind);\r\n            if ((ind === 2) || (ind === 6))\r\n                contact.hidden = 'hidden=true';\r\n            ind += 1;\r\n            contact.pianokey = `${ind}.mp3`;\r\n            result.push(contact);\r\n        }\r\n        result.reverse();\r\n        return result;\r\n    }\r\n    getAllData() {\r\n        const fileAdd = '../../../data/img/add.jpg';\r\n        const fileDelete = '../../../data/img/delete.jpg';\r\n        const fileImageSound = '../../../data/img/sound.jpg';\r\n        const { name } = this;\r\n        const errorMessage = 'Пустое сообщение';\r\n        return {\r\n            pianoKeys: this.contacts,\r\n            messages: this.messages,\r\n            fileImage: this.fileImage,\r\n            fileImageSound,\r\n            name,\r\n            errorMessage,\r\n            fileAdd,\r\n            fileDelete,\r\n        };\r\n    }\r\n    getChatMessages() {\r\n        return this.messages;\r\n    }\r\n    async render(context = undefined) {\r\n        // console.log(\"render\");\r\n        if (context === undefined) {\r\n            await this.getFileData();\r\n            context = this.getAllData();\r\n        }\r\n        const result = compileTemplate('.app', (0,_chat_tmpl__WEBPACK_IMPORTED_MODULE_1__.default)(), context);\r\n        return result;\r\n    }\r\n    async showChatHistory(elementContact) {\r\n        // console.log('elemContact', elementContact);\r\n        const idContact = this.getIdContact(elementContact);\r\n        if (idContact !== undefined) {\r\n            const history = this.getHistoryChat(idContact);\r\n            this.updateContacts(idContact);\r\n            const context = this.getAllData();\r\n            context.messages = history;\r\n            await this.render(context);\r\n            this.setEvents();\r\n        }\r\n    }\r\n    updateContacts(idContact) {\r\n        for (let i = 0; i < this.contacts.length; i++) {\r\n            if (this.contacts[i].contact.trim() == idContact.trim()) {\r\n                this.contacts[i].pressed = 'chat-wrapper__white-pianokey-pressed';\r\n                if (!window.noSound) {\r\n                    const sound = new Audio(`../../../data/sounds/${this.contacts[i].pianokey}`);\r\n                    sound.play();\r\n                }\r\n            }\r\n            else {\r\n                this.contacts[i].pressed = '';\r\n            }\r\n        }\r\n    }\r\n    getIdContact(elementContact) {\r\n        let element;\r\n        let result;\r\n        if (elementContact.classList.contains('chat-wrapper__contact')) {\r\n            element = elementContact;\r\n        }\r\n        else {\r\n            element = elementContact.querySelector('chat-wrapper__contact');\r\n            if (element == undefined) {\r\n                element = elementContact.querySelector('chat-wrapper__contact');\r\n            }\r\n        }\r\n        if (element !== null) {\r\n            result = element.textContent;\r\n        }\r\n        return result;\r\n    }\r\n    getHistoryChat(idContact) {\r\n        for (let i = 0; i < this.messages.length; i++) {\r\n            const elem = this.messages[i];\r\n            if ((elem.contact != null) && (elem.contact != undefined) && (elem.contact.trim() == idContact.trim())) {\r\n                return elem.history;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    setEvents() {\r\n        const nameHiddenError = 'chat-wrapper';\r\n        const inputs = [{ input: 'ineditor', value: _modules_validation__WEBPACK_IMPORTED_MODULE_2__.isValidMessage }];\r\n        const button = document.getElementById('ineditor');\r\n        if (button !== null) {\r\n            button.addEventListener('keypress', async (e) => {\r\n                if (e.key === 'Enter') {\r\n                    if ((0,_modules_validation__WEBPACK_IMPORTED_MODULE_2__.isValidValues)(inputs, nameHiddenError)) {\r\n                        const data = getData(inputs);\r\n                        // console.log(data);\r\n                        const idContact = this.getIdContact(window.currentKey);\r\n                        const now = new Date();\r\n                        const message = {\r\n                            from: window.login,\r\n                            to: idContact,\r\n                            text: data.ineditor,\r\n                            date: `${now.getFullYear()} ${getNameMonth(now.getMonth())} ${now.getDate()}`,\r\n                            time: `${now.getHours()}:${now.getMinutes()}:${now.getSeconds()}`,\r\n                            classmes: 'chat-wrapper__message-from',\r\n                        };\r\n                        // console.log('message', message);\r\n                        socket.send(JSON.stringify(message));\r\n                        const elemEditor = document.querySelector('#ineditor');\r\n                        elemEditor.textContent = '';\r\n                        const messages = await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_3__.getMessages)();\r\n                        const newMes = this.prepareMessages(JSON.parse(messages));\r\n                        this.messages = newMes;\r\n                        await this.render();\r\n                        console.log('curContact', window.curContact);\r\n                        window.currentBlock.showChatHistory(e.target);\r\n                        this.setEvents();\r\n                        window.curContact.click();\r\n                    }\r\n                }\r\n                else {\r\n                    const elementError = document.getElementById('err-ineditor7');\r\n                    if (elementError && (!elementError.classList.contains(nameHiddenError))) {\r\n                        elementError.classList.add(nameHiddenError);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        const elementButtonId = document.querySelector('.chat-wrapper__left-part');\r\n        if (elementButtonId != null) {\r\n            elementButtonId.addEventListener('click', (e) => {\r\n                // console.log('key');\r\n                window.curContact = e.target;\r\n                window.currentBlock.showChatHistory(e.target);\r\n                window.currentKey = e.target;\r\n            });\r\n        }\r\n        const elementSound = document.getElementById('sound');\r\n        if (elementSound != null) {\r\n            elementSound.addEventListener('click', (e) => {\r\n                if (elementSound.src == 'http://mf.messenger.praktikum.yandex/data/img/sound.jpg') {\r\n                    elementSound.src = 'http://mf.messenger.praktikum.yandex/data/img/nosound.jpg';\r\n                    window.noSound = true;\r\n                }\r\n                else {\r\n                    elementSound.src = 'http://mf.messenger.praktikum.yandex/data/img/sound.jpg';\r\n                    window.noSound = false;\r\n                }\r\n            });\r\n        }\r\n        const elementAddChat = document.querySelector('#add');\r\n        if (elementAddChat != null) {\r\n            elementAddChat.addEventListener('click', (e) => { addChat(); });\r\n        }\r\n        const elementDeleteChat = document.querySelector('#delete');\r\n        if (elementDeleteChat != null) {\r\n            elementDeleteChat.addEventListener('click', (e) => { deleteChat(); });\r\n        }\r\n    }\r\n    static async exit() {\r\n        await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_3__.logout)();\r\n        // console.log('curLogin', (<any>window).curLogin);\r\n        window.curLogin = undefined;\r\n    }\r\n}\r\nasync function addChat() {\r\n    const elementSearch = document.querySelector('#search');\r\n    const { value } = elementSearch;\r\n    // console.log(\"!\");\r\n    if (value === '') {\r\n        alert('Укажите имя чата');\r\n    }\r\n    else {\r\n        // console.log(\"!!!\");\r\n        const curChat = window.currentBlock;\r\n        await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_3__.addChatToList)({\r\n            title: value, contact: value, countmes: '', hidden: false, pressed: false, pianokey: '7si.mp3',\r\n        });\r\n        await curChat.render();\r\n        curChat.setEvents();\r\n    }\r\n}\r\nasync function deleteChat() {\r\n    const curChat = window.currentBlock;\r\n    const idContact = getCurrentContact(curChat.contacts);\r\n    const idChat = { chatId: curChat.contacts[idContact].id };\r\n    // console.log('idChat', idChat);\r\n    await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_3__.deleteChatFromList)(idChat);\r\n    await curChat.render();\r\n    curChat.setEvents();\r\n}\r\nfunction getCurrentContact(contacts) {\r\n    for (let i = 0; i < contacts.length; i++) {\r\n        if (contacts[i].pressed) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\nfunction getNameMonth(numMonth) {\r\n    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',\r\n        'July', 'August', 'September', 'October', 'November', 'December',\r\n    ];\r\n    return monthNames[numMonth];\r\n}\r\nsocket.onmessage = function (message) {\r\n    const newMes = JSON.parse(message.data);\r\n    if (newMes.to === window.login)\r\n        console.log('mesevent', newMes);\r\n};\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/pages/chat/index.ts?");

/***/ }),

/***/ "./src/pages/login/index.ts":
/*!**********************************!*
  !*** ./src/pages/login/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Login\": () => /* binding */ Login\n/* harmony export */ });\n/* harmony import */ var _modules_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/block */ \"./src/modules/block.ts\");\n/* harmony import */ var _login_tmpl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./login.tmpl */ \"./src/pages/login/login.tmpl.ts\");\n/* harmony import */ var _components_myButton_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../components/myButton/index */ \"./src/components/myButton/index.ts\");\n/* harmony import */ var _modules_autorization__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../modules/autorization */ \"./src/modules/autorization.ts\");\n/* harmony import */ var _modules_validation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../modules/validation */ \"./src/modules/validation.ts\");\n/// <reference path=\"../../../src/modules/references.d.ts\" />\r\n/// <reference path=\"../../../src/modules/common.d.ts\" />\r\n\r\n\r\n\r\n\r\n\r\nconst button = new _components_myButton_index__WEBPACK_IMPORTED_MODULE_2__.default({\r\n    id: 'autorisation',\r\n    className: 'my-button',\r\n    mesButton: 'Авторизация',\r\n});\r\nclass Login extends _modules_block__WEBPACK_IMPORTED_MODULE_0__.default {\r\n    constructor(props) {\r\n        super('login', props);\r\n        this.users = [];\r\n        this.setEvents();\r\n    }\r\n    getData() {\r\n        const result = {\r\n            mesEnter: 'Вход',\r\n            mesMail: 'Введите логин',\r\n            mesPassword: 'Введите пароль',\r\n            mesAutorisation: 'Авторизация',\r\n            mesAccount: 'нет аккаунта?',\r\n            errorMes0: 'Не верно введены данные',\r\n            errorMes1: 'Ваш пароль должен быть не менее 8 символов',\r\n            errorMes2: 'Ваш пароль должен содержать хотя бы один литерал',\r\n            errorMes3: 'Ваш пароль должен содержать хотя бы одну цифру',\r\n            errorMes4: 'Не допускаются пробелы',\r\n            errorMes5: 'Длина должна быть не менее 5 символов',\r\n            errorMes6: 'Неверный логин или пароль',\r\n        };\r\n        return result;\r\n    }\r\n    render() {\r\n        const context = this.getData();\r\n        compileTemplate('.app', (0,_login_tmpl__WEBPACK_IMPORTED_MODULE_1__.default)(), context);\r\n        const mainElem = document.querySelector('.app');\r\n        button.render(mainElem);\r\n        // console.log((<any>window).curLogin);\r\n        if (window.curLogin !== undefined) {\r\n            const inputs = [\r\n                { input: 'login', value: _modules_validation__WEBPACK_IMPORTED_MODULE_4__.isValidLogin },\r\n                { input: 'password', value: _modules_validation__WEBPACK_IMPORTED_MODULE_4__.isValidPassword },\r\n            ];\r\n            // console.log('login cur');\r\n            goNextPage(inputs);\r\n        }\r\n        return mainElem.innerHTML;\r\n    }\r\n    show() {\r\n    }\r\n    setEvents() {\r\n        const nameHiddenElement = 'wrapper__errmes-hiddenerr';\r\n        const elementLogin = document.getElementById('login');\r\n        elementLogin.addEventListener('blur', (e) => {\r\n            (0,_modules_validation__WEBPACK_IMPORTED_MODULE_4__.validateLogin)('login', nameHiddenElement);\r\n        });\r\n        const elementPassword = document.getElementById('password');\r\n        elementPassword.addEventListener('blur', (e) => {\r\n            (0,_modules_validation__WEBPACK_IMPORTED_MODULE_4__.validatePassword)('password', nameHiddenElement);\r\n        });\r\n        const inputs = [\r\n            { input: 'login', value: _modules_validation__WEBPACK_IMPORTED_MODULE_4__.isValidLogin },\r\n            { input: 'password', value: _modules_validation__WEBPACK_IMPORTED_MODULE_4__.isValidPassword },\r\n        ];\r\n        (0,_modules_validation__WEBPACK_IMPORTED_MODULE_4__.setFocus)(inputs, nameHiddenElement);\r\n        setFormEvent(inputs, nameHiddenElement);\r\n    }\r\n}\r\nfunction setFormEvent(arrInputs, nameHiddenElement) {\r\n    const frmAutorisation = document.querySelector('#form');\r\n    frmAutorisation.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        const user = getData(arrInputs);\r\n        await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_3__.logout)();\r\n        const res = await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_3__.isAutorizied)(user);\r\n        if (res) {\r\n            if ((0,_modules_validation__WEBPACK_IMPORTED_MODULE_4__.isValidValues)(arrInputs, nameHiddenElement)) {\r\n                goNextPage(arrInputs);\r\n            }\r\n        }\r\n        else {\r\n            const elementError = document.querySelector('#err-password6');\r\n            if ((elementError != null) && (elementError.classList.contains(nameHiddenElement))) {\r\n                elementError.classList.remove(nameHiddenElement);\r\n            }\r\n        }\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/pages/login/index.ts?");

/***/ }),

/***/ "./src/pages/login/login.tmpl.ts":
/*!***************************************!*
  !*** ./src/pages/login/login.tmpl.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ getTemplateLogin\n/* harmony export */ });\nfunction getTemplateLogin() {\r\n    return ` <div class=\"wrapper\">\n    <form method=\"post\" id=\"form\" action=\"#\" enctype=\"multipart/form-data\">\n    <div class=\"wrapper__row\">\n        <p> {{mesEnter}} </p>\n    </div>\n    <div class=\"wrapper__row\">\n        <p>\n            <img src=\"../data/img/trebleСlef.png\" width=\"40px\" height=\"40px\">\n            <input class=\"wrapper__row\" id=\"login\" name=\"login\" type=\"login\" placeholder={{mesMail}}>\n           \n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-login0\">\n                    {{errorMes0}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-login4\">\n                    {{errorMes4}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-login5\">\n                    {{errorMes5}}\n                </p>\n        </p>\n    </div>\n    <div class=\"wrapper__row\">\n        <p><img src=\"../data/img/bassСlef.jpg\" width=\"40\" height=\"40px\">\n            <input class=\"wrapper__row\" id=\"password\" name=\"password\" type=\"password\" placeholder={{mesPassword}}>\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password1\">\n            {{errorMes1}}\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password2\">\n            {{errorMes2}}\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password3\">\n            {{errorMes3}}\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password4\">\n            {{errorMes4}}\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password5\">\n            {{errorMes5}}\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password6\">\n        {{errorMes6}}\n    </p>\n    </div>\n    <div class=\"wrapper__row\">\n    <div class=\"myButton\"></div>\n       \n    </div>\n    <div class=\"wrapper__row wrapper__no-accaunt\">\n        <p id=\"noAccount\"><a href=\"/#registration\" onclick = \" window.location.hash = '#registration'\"> {{mesAccount}} </a></p>\n    </div>\n    </form>\n</div>`;\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/pages/login/login.tmpl.ts?");

/***/ }),

/***/ "./src/pages/registration/index.ts":
/*!*****************************************!*
  !*** ./src/pages/registration/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Registration\": () => /* binding */ Registration\n/* harmony export */ });\n/* harmony import */ var _modules_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/block */ \"./src/modules/block.ts\");\n/* harmony import */ var _registration_tmpl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./registration.tmpl */ \"./src/pages/registration/registration.tmpl.ts\");\n/* harmony import */ var _modules_autorization__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../modules/autorization */ \"./src/modules/autorization.ts\");\n/* harmony import */ var _modules_validation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../modules/validation */ \"./src/modules/validation.ts\");\n/* harmony import */ var _components_myButton_index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/myButton/index */ \"./src/components/myButton/index.ts\");\n/// <reference path=\"../../../src/modules/references.d.ts\" />\r\n\r\n\r\n\r\n\r\n\r\nconst button = new _components_myButton_index__WEBPACK_IMPORTED_MODULE_4__.default({\r\n    id: 'reg',\r\n    className: 'my-button',\r\n    mesButton: 'Зарегистрироваться',\r\n});\r\nclass Registration extends _modules_block__WEBPACK_IMPORTED_MODULE_0__.default {\r\n    constructor(props) {\r\n        super('registration', props);\r\n    }\r\n    getData() {\r\n        const result = {\r\n            mesReg: 'Регистрация',\r\n            mesEmail: 'Почта',\r\n            mesLogin: 'Логин',\r\n            mesPassword: 'Пароль',\r\n            mesPasswordR: 'Пароль (еще раз)',\r\n            btnReg: 'Зарегистрироваться',\r\n            errorMes0: 'Не верно введены данные',\r\n            errorMes1: 'Ваш пароль должен быть не менее 8 символов',\r\n            errorMes2: 'Ваш пароль должен содержать хотя бы один литерал',\r\n            errorMes3: 'Ваш пароль должен содержать хотя бы одну цифру',\r\n            errorMes4: 'Не допускаются пробелы',\r\n            errorMes5: 'Длина должна быть не менее 5 символов',\r\n            errorMes6: 'Пароли не совпадают',\r\n        };\r\n        return result;\r\n    }\r\n    render() {\r\n        const context = this.getData();\r\n        compileTemplate('.app', (0,_registration_tmpl__WEBPACK_IMPORTED_MODULE_1__.default)(), context);\r\n        const mainElem = document.querySelector('.app');\r\n        button.render(mainElem);\r\n        return mainElem.innerHTML;\r\n    }\r\n    setEvents() {\r\n        const nameHiddenElement = 'wrapper__errmes-hiddenerr';\r\n        const elementEmail = document.getElementById('email');\r\n        elementEmail.addEventListener('blur', (e) => {\r\n            (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.validateEMail)('email', nameHiddenElement);\r\n        });\r\n        const elementLogin = document.getElementById('login');\r\n        elementLogin.addEventListener('blur', (e) => {\r\n            (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.validateLogin)('login', nameHiddenElement);\r\n        });\r\n        const elementName = document.getElementById('name');\r\n        elementName.addEventListener('blur', (e) => {\r\n            (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.validateName)('name', nameHiddenElement);\r\n        });\r\n        const elementPassword = document.getElementById('password');\r\n        elementPassword.addEventListener('blur', (e) => {\r\n            (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.validatePassword)('password', nameHiddenElement);\r\n        });\r\n        const elementRepeatPassword = document.getElementById('passwordr');\r\n        elementRepeatPassword.addEventListener('blur', (e) => {\r\n            (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.validatePassword)('passwordr', nameHiddenElement);\r\n        });\r\n        const inputs = [\r\n            { input: 'email', value: _modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidEmail },\r\n            { input: 'login', value: _modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidLogin },\r\n            { input: 'name', value: _modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidName },\r\n            { input: 'password', value: _modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidPassword },\r\n            { input: 'passwordr', value: _modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidPassword },\r\n        ];\r\n        (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.setFocus)(inputs, nameHiddenElement);\r\n        setFormEvent(inputs, nameHiddenElement);\r\n    }\r\n}\r\nfunction setFormEvent(arrInputs, nameHiddenElement) {\r\n    const frmAutorisation = document.querySelector('#form');\r\n    frmAutorisation.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        const user = getData(arrInputs);\r\n        const res = await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_2__.isRegistrationSuccess)(user);\r\n        if (res) {\r\n            if ((0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidValues)(arrInputs, nameHiddenElement)) {\r\n                const resObj = JSON.parse(res);\r\n                window.idUser = resObj.id;\r\n                if (!resObj.id !== undefined) {\r\n                    goNextPage(arrInputs);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            const elementError = document.querySelector('#err-password7');\r\n            if ((elementError != null) && (elementError.classList.contains(nameHiddenElement))) {\r\n                elementError.classList.remove(nameHiddenElement);\r\n            }\r\n        }\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/pages/registration/index.ts?");

/***/ }),

/***/ "./src/pages/registration/registration.tmpl.ts":
/*!*****************************************************!*
  !*** ./src/pages/registration/registration.tmpl.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ getTemplateRegistration\n/* harmony export */ });\nfunction getTemplateRegistration() {\r\n    return `<div class=\"wrapper\">\n\n    <div class=\"wrapper__row\">\n        <p> Регистрация </p>\n    </div>\n    <form method=\"post\" id=\"form\">\n    <div class=\"wrapper__row\">\n        <p>\n            <input class=\"wrapper__row\" id=\"email\" name=\"email\" type=\"email\" placeholder=\"Почта\">\n        </p>\n    </div>\n    <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-email0\">\n        Не верно введены данные\n    </p>\n    <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-email4\">\n        Не допускаются пробелы\n    </p>\n    <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-email5\">\n        Длина должна быть не менее 5 символов\n    </p>\n\n    <div class=\"wrapper__row\">\n        <input class=\"wrapper__row\" id=\"login\" name=\"login\" type=\"text\" placeholder=\"Логин\">\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-login0\">\n            Не верно введены данные\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-login4\">\n            Не допускаются пробелы\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-login5\">\n            Длина должна быть не менее 5 символов\n        </p>\n    </div>\n\n    <div class=\"wrapper__row\">\n    <input class=\"wrapper__row\" id=\"name\" name=\"name\" type=\"text\" placeholder=\"Имя\">\n    <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-name0\">\n        Не верно введены данные\n    </p>\n    <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-name4\">\n        Не допускаются пробелы\n    </p>\n    <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-name5\">\n        Длина должна быть не менее 5 символов\n    </p>\n    </div>\n\n    <div class=\"wrapper__row\">\n        <input class=\"wrapper__row\" id=\"password\" name=\"password\" type=\"password\" placeholder=\"Пароль\">\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password1\">\n            Ваш пароль должен быть не менее 8 символов\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password2\">\n            Ваш пароль должен содержать хотя бы один литерал\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password3\">\n            Ваш пароль должен содержать хотя бы одну цифру\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password4\">\n            Не допускаются пробелы\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password5\">\n            Длина должна быть не менее 5 символов\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password6\">\n        Пароли не совпадают\n        </p>\n    </p>\n    </div>\n    <div class=\"wrapper__row\">\n        <input class=\"wrapper__row\" id=\"passwordr\" name=\"passwordr\" type=\"password\" placeholder=\"Пароль\" (еще=\"\" раз)=\"\">\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr1\">\n            Ваш пароль должен быть не менее 8 символов\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr2\">\n            Ваш пароль должен содержать хотя бы один литерал\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr3\">\n            Ваш пароль должен содержать хотя бы одну цифру\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr4\">\n            Не допускаются пробелы\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr5\">\n            Длина должна быть не менее 5 символов\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr6\">\n            Пароли не совпадают\n        </p>\n        <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password7\">\n        Такой пользователь уже существует\n        </p>\n    </div>\n\n    <div class=\"myButton\">\n        <p><button id=\"reg\" type=\"submit\" class=\"my-button\"> Зарегистрироваться </button></p>\n    </div>\n</form>\n</div>`;\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/pages/registration/registration.tmpl.ts?");

/***/ }),

/***/ "./src/pages/settings/index.ts":
/*!*************************************!*
  !*** ./src/pages/settings/index.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Settings\": () => /* binding */ Settings\n/* harmony export */ });\n/* harmony import */ var _modules_block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../modules/block */ \"./src/modules/block.ts\");\n/* harmony import */ var _settings_tmpl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./settings.tmpl */ \"./src/pages/settings/settings.tmpl.ts\");\n/* harmony import */ var _modules_autorization__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../modules/autorization */ \"./src/modules/autorization.ts\");\n/* harmony import */ var _modules_validation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../modules/validation */ \"./src/modules/validation.ts\");\n/* harmony import */ var _components_myButton_index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/myButton/index */ \"./src/components/myButton/index.ts\");\n/// <reference path=\"../../../src/modules/references.d.ts\" />\r\n\r\n\r\n\r\n\r\n\r\nconst button = new _components_myButton_index__WEBPACK_IMPORTED_MODULE_4__.default({\r\n    id: 'save',\r\n    className: 'my-button',\r\n    mesButton: 'Сохранить',\r\n});\r\nclass Settings extends _modules_block__WEBPACK_IMPORTED_MODULE_0__.default {\r\n    constructor(props) {\r\n        super('settings', props);\r\n    }\r\n    async getData() {\r\n        const dataUser = await (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_2__.getUserData)();\r\n        if (dataUser.avatar === null)\r\n            dataUser.avatar = '../../../data/img/noava.png';\r\n        else\r\n            dataUser.avatar = `https://ya-praktikum.tech${dataUser.avatar}`;\r\n        const result = {\r\n            fimg: dataUser.avatar,\r\n            fname: dataUser.first_name,\r\n            femail: dataUser.email,\r\n            fpassword: 'password8',\r\n            fpasswordRepeat: 'password8',\r\n            errorMes0: 'Не верно введены данные',\r\n            errorMes1: 'Ваш пароль должен быть не менее 8 символов',\r\n            errorMes2: 'Ваш пароль должен содержать хотя бы один литерал',\r\n            errorMes3: 'Ваш пароль должен содержать хотя бы одну цифру',\r\n            errorMes4: 'Не допускаются пробелы',\r\n            errorMes5: 'Длина должна быть не менее 5 символов',\r\n            errorMes6: 'Пароли не совпадают',\r\n        };\r\n        return result;\r\n    }\r\n    async render() {\r\n        const context = await this.getData();\r\n        compileTemplate('.app', (0,_settings_tmpl__WEBPACK_IMPORTED_MODULE_1__.default)(), context);\r\n        const mainElem = document.querySelector('.app');\r\n        button.render(mainElem);\r\n        return mainElem.innerHTML;\r\n    }\r\n    setEvents() {\r\n        const nameHiddenElement = 'wrapper__errmes-hiddenerr';\r\n        const elementEmail = document.getElementById('email');\r\n        if (elementEmail !== null) {\r\n            elementEmail.addEventListener('blur', (e) => {\r\n                (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.validateEMail)('email', nameHiddenElement);\r\n            });\r\n        }\r\n        const elementName = document.getElementById('name');\r\n        if (elementName !== null) {\r\n            elementName.addEventListener('blur', (e) => {\r\n                (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.validateName)('name', nameHiddenElement);\r\n            });\r\n        }\r\n        const elementPassword = document.getElementById('password');\r\n        if (elementPassword !== null) {\r\n            elementPassword.addEventListener('blur', (e) => {\r\n                (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.validatePassword)('password', nameHiddenElement);\r\n            });\r\n        }\r\n        const elementRepeatPassword = document.getElementById('passwordr');\r\n        if (elementRepeatPassword !== null) {\r\n            elementRepeatPassword.addEventListener('blur', (e) => {\r\n                (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.validatePassword)('passwordr', nameHiddenElement);\r\n            });\r\n        }\r\n        const inputs = [\r\n            { input: 'email', value: _modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidEmail },\r\n            { input: 'name', value: _modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidName },\r\n            { input: 'password', value: _modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidPassword },\r\n            { input: 'passwordr', value: _modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidPassword },\r\n        ];\r\n        (0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.setFocus)(inputs, nameHiddenElement);\r\n        // setButtonEvents(\"save\", inputs, nameHiddenElement);\r\n        setFormEvent(inputs, nameHiddenElement);\r\n    }\r\n}\r\nfunction setFormEvent(arrInputs, nameHiddenElement) {\r\n    const frmAutorisation = document.getElementById('form');\r\n    frmAutorisation.addEventListener('submit', async (e) => {\r\n        const imgAvatar = document.querySelector('#avatar');\r\n        // console.log('imgAvatar', imgAvatar);\r\n        e.preventDefault();\r\n        const user = getData(arrInputs);\r\n        const formatUser = {\r\n            first_name: user.name,\r\n            second_name: user.name,\r\n            display_name: user.name,\r\n            login: window.login,\r\n            email: user.email,\r\n            phone: '+79188888888',\r\n            avatar: imgAvatar.src,\r\n        };\r\n        if ((0,_modules_validation__WEBPACK_IMPORTED_MODULE_3__.isValidValues)(arrInputs, nameHiddenElement)) {\r\n            user.avatar = imgAvatar.src;\r\n            const res = (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_2__.saveUserData)(formatUser);\r\n            if (res) {\r\n                goNextPage(arrInputs);\r\n            }\r\n            else {\r\n                const elementError = document.querySelector('#err-password6');\r\n                if ((elementError != null) && (elementError.classList.contains(nameHiddenElement))) {\r\n                    elementError.classList.remove(nameHiddenElement);\r\n                }\r\n            }\r\n            const blob = await fetch(imgAvatar.src).then((r) => r.blob());\r\n            console.log(typeof blob, blob);\r\n            const formData = new FormData();\r\n            formData.append('avatar', blob, imgAvatar.src);\r\n            const resAvatar = (0,_modules_autorization__WEBPACK_IMPORTED_MODULE_2__.saveAvatar)(formData);\r\n            console.log(resAvatar);\r\n        }\r\n    });\r\n    const inpFile = document.querySelector('#newPhoto');\r\n    inpFile.addEventListener('change', (e) => {\r\n        const value = inpFile.files[0];\r\n        const imgAvatar = document.querySelector('#avatar');\r\n        imgAvatar.src = window.URL.createObjectURL(value);\r\n    });\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/pages/settings/index.ts?");

/***/ }),

/***/ "./src/pages/settings/settings.tmpl.ts":
/*!*********************************************!*
  !*** ./src/pages/settings/settings.tmpl.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => /* binding */ getTemplateSettings\n/* harmony export */ });\nfunction getTemplateSettings() {\r\n    return `\n    <div class=\"basic-wrapper\">\n    <form method=\"post\" id=\"form\" class=\"basic-wrapper__item\">\n        <div class=\"basic-wrapper__settings\">\n            \n            <p>\n                <img src={{fimg}} alt=\"\" id=\"avatar\" class=\"round\" width=\"80px\" height=\"80px\">\n            </p>\n            <p>\n                <input type=\"file\" id=\"newPhoto\"></input>\n            </p>\n           \n            <div>\n                <p>{{fname}}</p>\n            </div>\n            <p>\n                <div class=\"basic-wrapper__itemrow\">\n                    <label for=\"email\" class=\"basic-wrapper__leftitem\">Почта</label>\n                    <input id=\"email\" class=\"basic-wrapper__setting\" value={{femail}}>\n                </div>\n                \n                <div class=\"basic-wrapper__line\"></div>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-email0\">\n                    {{errorMes0}}\n                 </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-email4\">\n                    {{errorMes4}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-email5\">\n                    {{errorMes5}}\n                </p>\n            </p>\n            <p>\n                <div class=\"basic-wrapper__itemrow\">\n                    <label for=\"name\"class=\"basic-wrapper__leftitem\">Имя</label>\n                    <input id=\"name\" class=\"basic-wrapper__setting\" value={{fname}}>\n                </div>\n                <div class=\"basic-wrapper__line\"></div>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-name0\">\n                    {{errorMes0}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-name4\">\n                    {{errorMes4}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-name5\">\n                    {{errorMes5}}\n                </p>\n            </p>\n            <p>\n                <div class=\"basic-wrapper__itemrow\">\n                    <label for=\"password\" class=\"basic-wrapper__leftitem\">Пароль</label>\n                    <input id=\"password\" class=\"basic-wrapper__setting\" type=\"password\" value={{fpassword}}>\n                </div>\n                \n                <div class=\"basic-wrapper__line\"></div>\n                \n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password1\">\n                    {{errorMes1}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password2\">\n                    {{errorMes2}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password3\">\n                    {{errorMes3}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password4\">\n                    {{errorMes4}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password5\">\n                    {{errorMes5}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-password6\">\n                {{errorMes6}}\n            </p>\n            </p>\n            <p>\n                <div class=\"basic-wrapper__itemrow\">\n                    <label for=\"passwordr\" class=\"basic-wrapper__leftitem\">Пароль (еще раз)</label>\n                    <input id=\"passwordr\" class=\"basic-wrapper__setting\" type=\"password\" value={{fpasswordRepeat}}>\n                </div>\n               \n                <div class=\"basic-wrapper__line\"></div>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr1\">\n                    {{errorMes1}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr2\">\n                    {{errorMes2}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr3\">\n                    {{errorMes3}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr4\">\n                    {{errorMes4}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr5\">\n                    {{errorMes5}}\n                </p>\n                <p class=\"wrapper__errmes wrapper__errmes-hiddenerr\" id=\"err-passwordr6\">\n                    {{errorMes6}}\n                </p>\n            </p>\n            <div class=\"myButton\">\n            </div>\n        </div>\n    </form>\n    </div>`;\r\n}\r\n\n\n//# sourceURL=webpack://mf.messenger.praktikum.yandex/./src/pages/settings/settings.tmpl.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./index.ts");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;